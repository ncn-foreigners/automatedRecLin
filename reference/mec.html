<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Unsupervised Maximum Entropy Classifier for Record Linkage — mec • automatedRecLin</title><!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="../katex-auto.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Unsupervised Maximum Entropy Classifier for Record Linkage — mec"><meta name="description" content="Implements several extensions to the maximum entropy classification (MEC) algorithm for record linkage
(see Lee et al. (2022)),
iteratively estimating probability/density ratios to classify record pairs into matches and non-matches
based on comparison vectors."><meta property="og:description" content="Implements several extensions to the maximum entropy classification (MEC) algorithm for record linkage
(see Lee et al. (2022)),
iteratively estimating probability/density ratios to classify record pairs into matches and non-matches
based on comparison vectors."><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous"><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">automatedRecLin</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Unsupervised Maximum Entropy Classifier for Record Linkage</h1>

      <div class="d-none name"><code>mec.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Implements several extensions to the maximum entropy classification (MEC) algorithm for record linkage
(see <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/2022001/article/00007-eng.htm" class="external-link">Lee et al. (2022)</a>),
iteratively estimating probability/density ratios to classify record pairs into matches and non-matches
based on comparison vectors.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mec</span><span class="op">(</span></span>
<span>  <span class="va">A</span>,</span>
<span>  <span class="va">B</span>,</span>
<span>  <span class="va">variables</span>,</span>
<span>  comparators <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  methods <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  duplicates_in_A <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  start_params <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  nonpar_hurdle <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  set_construction <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  target_flr <span class="op">=</span> <span class="fl">0.03</span>,</span>
<span>  max_iter_bisection <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  tol <span class="op">=</span> <span class="fl">0.005</span>,</span>
<span>  delta <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  eps <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>  max_iter_em <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  tol_em <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  controls_nleqslv <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  controls_kliep <span class="op">=</span> <span class="fu"><a href="control_kliep.html">control_kliep</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  true_matches <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-a">A<a class="anchor" aria-label="anchor" href="#arg-a"></a></dt>
<dd><p>A duplicate-free <code>data.frame</code> or <code>data.table</code>.</p></dd>


<dt id="arg-b">B<a class="anchor" aria-label="anchor" href="#arg-b"></a></dt>
<dd><p>A duplicate-free <code>data.frame</code> or <code>data.table</code>.</p></dd>


<dt id="arg-variables">variables<a class="anchor" aria-label="anchor" href="#arg-variables"></a></dt>
<dd><p>A character vector of key variables used to create comparison vectors.</p></dd>


<dt id="arg-comparators">comparators<a class="anchor" aria-label="anchor" href="#arg-comparators"></a></dt>
<dd><p>A named list of functions for comparing pairs of records.</p></dd>


<dt id="arg-methods">methods<a class="anchor" aria-label="anchor" href="#arg-methods"></a></dt>
<dd><p>A named list of methods used for estimation (<code>"binary"</code>, <code>"continuous_parametric"</code>, <code>"continuous_nonparametric"</code> or <code>"hit_miss"</code>).</p></dd>


<dt id="arg-duplicates-in-a">duplicates_in_A<a class="anchor" aria-label="anchor" href="#arg-duplicates-in-a"></a></dt>
<dd><p>Logical indicating whether to allow <code>A</code> to have duplicate records.</p></dd>


<dt id="arg-start-params">start_params<a class="anchor" aria-label="anchor" href="#arg-start-params"></a></dt>
<dd><p>Start parameters for the <code>"binary"</code>, <code>"continuous_parametric"</code> and <code>"hit_miss"</code> methods.</p></dd>


<dt id="arg-nonpar-hurdle">nonpar_hurdle<a class="anchor" aria-label="anchor" href="#arg-nonpar-hurdle"></a></dt>
<dd><p>Logical indicating whether to use a hurdle model or not
(used only if the <code>"continuous_nonparametric"</code> method has been chosen for at least one variable).</p></dd>


<dt id="arg-set-construction">set_construction<a class="anchor" aria-label="anchor" href="#arg-set-construction"></a></dt>
<dd><p>A method for constructing the predicted set of matches (<code>"size"</code> or <code>"flr"</code>).</p></dd>


<dt id="arg-target-flr">target_flr<a class="anchor" aria-label="anchor" href="#arg-target-flr"></a></dt>
<dd><p>A target false link rate (FLR) (used only if <code>set_construction == "flr"</code>).</p></dd>


<dt id="arg-max-iter-bisection">max_iter_bisection<a class="anchor" aria-label="anchor" href="#arg-max-iter-bisection"></a></dt>
<dd><p>A maximum number of iterations for the bisection procedure (used only if <code>set_construction == "flr"</code>).</p></dd>


<dt id="arg-tol">tol<a class="anchor" aria-label="anchor" href="#arg-tol"></a></dt>
<dd><p>Error tolerance in the bisection procedure (used only if <code>set_construction == "flr"</code>).</p></dd>


<dt id="arg-delta">delta<a class="anchor" aria-label="anchor" href="#arg-delta"></a></dt>
<dd><p>A numeric value specifying the tolerance for the change in the estimated number of matches between iterations.</p></dd>


<dt id="arg-eps">eps<a class="anchor" aria-label="anchor" href="#arg-eps"></a></dt>
<dd><p>A numeric value specifying the tolerance for the change in model parameters between iterations.</p></dd>


<dt id="arg-max-iter-em">max_iter_em<a class="anchor" aria-label="anchor" href="#arg-max-iter-em"></a></dt>
<dd><p>A maximum number of iterations for the EM algorithm
(used only if the <code>"hit_miss"</code> method has been chosen for at least one variable).</p></dd>


<dt id="arg-tol-em">tol_em<a class="anchor" aria-label="anchor" href="#arg-tol-em"></a></dt>
<dd><p>Error tolerance in the EM algorithm
(used only if the <code>"hit_miss"</code> method has been chosen for at least one variable).</p></dd>


<dt id="arg-controls-nleqslv">controls_nleqslv<a class="anchor" aria-label="anchor" href="#arg-controls-nleqslv"></a></dt>
<dd><p>Controls passed to the <a href="https://rdrr.io/pkg/nleqslv/man/nleqslv.html" class="external-link">nleqslv</a> function
(only if the <code>"continuous_parametric"</code> method has been chosen for at least one variable).</p></dd>


<dt id="arg-controls-kliep">controls_kliep<a class="anchor" aria-label="anchor" href="#arg-controls-kliep"></a></dt>
<dd><p>Controls passed to the <a href="https://thomvolker.github.io/densityratio/reference/kliep.html" class="external-link">kliep</a> function
(only if the <code>"continuous_nonparametric"</code> method has been chosen for at least one variable).</p></dd>


<dt id="arg-true-matches">true_matches<a class="anchor" aria-label="anchor" href="#arg-true-matches"></a></dt>
<dd><p>A <code>data.frame</code> or <code>data.table</code> indicating known matches.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a list containing:<br></p><ul><li><p><code>M_est</code> – a <code>data.table</code> with predicted matches,</p></li>
<li><p><code>n_M_est</code> – estimated classification set size,</p></li>
<li><p><code>flr_est</code> – estimated false link rate (FLR),</p></li>
<li><p><code>mmr_est</code> – estimated missing match rate (MMR),</p></li>
<li><p><code>iter_bisection</code> – the number of iterations in the bisection procedure,</p></li>
<li><p><code>b_vars</code> – a character vector of variables used for the <code>"binary"</code> method (with the prefix <code>"gamma_"</code>),</p></li>
<li><p><code>cpar_vars</code> – a character vector of variables used for the <code>"continuous_parametric"</code> method (with the prefix <code>"gamma_"</code>),</p></li>
<li><p><code>cnonpar_vars</code> – a character vector of variables used for the <code>"continuous_nonparametric"</code> method (with the prefix <code>"gamma_"</code>),</p></li>
<li><p><code>hm_vars</code> – a character vector of variables used for the <code>"hit_miss"</code> method (with the prefix <code>"gamma_"</code>),</p></li>
<li><p><code>b_params</code> – parameters estimated using the <code>"binary"</code> method,</p></li>
<li><p><code>cpar_params</code> – parameters estimated using the <code>"continuous_parametric"</code> method,</p></li>
<li><p><code>hm_params</code> – parameters estimated using the <code>"hit_miss"</code> method,</p></li>
<li><p><code>ratio_kliep</code> – a result of the <a href="https://thomvolker.github.io/densityratio/reference/kliep.html" class="external-link">kliep</a> function,</p></li>
<li><p><code>variables</code> – a character vector of key variables used for comparison,</p></li>
<li><p><code>set_construction</code> – a method for constructing the predicted set of matches,</p></li>
<li><p><code>eval_metrics</code> – standard metrics for quality assessment (if <code>true_matches</code> is provided),</p></li>
<li><p><code>confusion</code> – confusion matrix (if <code>true_matches</code> is provided).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Consider two datasets without duplicates: \(A\) and \(B\).
Let the bipartite comparison space \(\Omega = A \times B\) consist of
matches \(M\) and non-matches \(U\) between the records in files
\(A\) and \(B\). For any pair of records \((a,b) \in \Omega\),
let \(\pmb{\gamma}_{ab} = (\gamma_{ab}^1,\gamma_{ab}^2,
\ldots,\gamma_{ab}^K)'\) be the comparison vector between
a set of key variables. The original MEC algorithm uses the binary
comparison function to evaluate record pairs across two datasets.
However, this approach may be insufficient when handling datasets
with frequent errors across multiple variables.</p>
<p>We propose the use of continuous comparison functions to address
the limitations of binary comparison methods. We consider every
semi-metric, i.e., a function \(d: A \times B \to \mathbb{R}\),
satisfying the following conditions:<br></p><ol><li><p>\(d(x,y) \geq 0\),</p></li>
<li><p>\(d(x,y) = 0\) if and only if \(x = y\),</p></li>
<li><p>\(d(x,y) = d(y,x)\).</p></li>
</ol><p>For example, we can use \(1 - \text{Jaro-Winkler distance}\) for character variables
(which is implemented in the <code>automatedRecLin</code> package as the <code>jarowinkler_complement</code> function)
or the Euclidean distance for numerical variables. The <code>automatedRecLin</code> package allows the use of
a different comparison function for each key variable (which should be specified
as a list in the <code>comparators</code> argument). The default function
for each key variable is <a href="https://rdrr.io/pkg/reclin2/man/comparators.html" class="external-link">cmp_identical</a>
(the binary comparison function).</p>
<p>The <code>mec</code> function offers different approaches to estimate the
probability/density ratio between matches and non-matches,
which should be specified as a list in the <code>methods</code> argument.
The available methods suitable for the binary comparison function
are <code>"binary"</code> and <code>"hit_miss"</code>. Both assume that \(\gamma_{ab}^k|M\)
and \(\gamma_{ab}^k|U\) follow Bernoulli distributions.
<code>"binary"</code> and <code>"hit_miss"</code> both estimate the parameters for the matches iteratively,
but <code>"binary"</code> estimates the parameters for the non-matches
only at the start, while <code>"hit_miss"</code> does
so iteratively using a hit-miss model (for details see
<a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/2022001/article/00007-eng.htm" class="external-link">Lee et al. (2022)</a>).
<code>"binary"</code> is the default method for each variable.</p>
<p>For the continuous semi-metrics we suggest the usage
of <code>"continuous_parametric"</code> or <code>"continuous_nonparametric"</code>
method. The <code>"continuous_parametric"</code> method assumes that
\(\gamma_{ab}^k|M\) and \(\gamma_{ab}^k|U\) follow
hurdle Gamma distributions. The density function of a hurdle
Gamma distribution is characterized by three parameters
\(p_0 \in (0,1)\) and \(\alpha, \beta &gt; 0\) as follows:
$$
f(x;p_0,\alpha,\beta) = p_0^{\mathbb{I}(x = 0)}[(1 - p_0) v(x;\alpha,\beta)]^{\mathbb{I}(x &gt; 0)},
$$
where
$$
v(x;\alpha,\beta) = \frac{\beta^{\alpha} x^{\alpha - 1} \exp(-\beta x)}
{\Gamma(\alpha)}
$$
is the density function of a Gamma distribution
(for details see <a href="https://ideas.repec.org/a/eee/csdana/v179y2023ics0167947322002365.html" class="external-link">Vo et al. (2023)</a>).
At the beginning, the algorithm estimates the parameters for the non-matches
and then does it iteratively for the matches.
The <code>"continuous_nonparametric"</code> method does not assume anything about
the distributions of the comparison vectors. It iteratively directly
estimates the density ratio between the matches and the non-matches, using
the Kullback-Leibler Importance Estimation Procedure (KLIEP).
For details see <a href="https://link.springer.com/article/10.1007/s10463-008-0197-x" class="external-link">Sugiyama et al. (2008)</a>.</p>
<p>The <code>mec</code> function allows the construction of the predicted set
of matches using its estimated size or the bisection procedure,
described in <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/2022001/article/00007-eng.htm" class="external-link">Lee et al. (2022)</a>,
based on a target False Link Rate (FLR). To use the second option, set <code>set_construction = "flr"</code> and
specify a target FLR using the <code>target_flr</code> argument.</p>
<p>The assumption that \(A\) and \(B\) contain no duplicate records
might be relaxed by allowing \(A\) to have duplicates. To do so,
set <code>"duplicates_in_A = TRUE</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Lee, D., Zhang, L.-C. and Kim, J. K. (2022). Maximum entropy classification for record linkage.
Survey Methodology, Statistics Canada, Catalogue No. 12-001-X, Vol. 48, No. 1.</p>
<p>Vo, T. H., Chauvet, G., Happe, A., Oger, E., Paquelet, S., and Garès, V. (2023).
Extending the Fellegi-Sunter record linkage model for mixed-type data with application to the French national health data system.
Computational Statistics &amp; Data Analysis, 179, 107656.</p>
<p>Sugiyama, M., Suzuki, T., Nakajima, S. et al. Direct importance estimation for covariate shift adaptation.
Ann Inst Stat Math 60, 699–746 (2008). <a href="https://doi.org/10.1007/s10463-008-0197-x" class="external-link">doi:10.1007/s10463-008-0197-x</a></p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Adam Struzik</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">df_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Emma"</span>, <span class="st">"Liam"</span>, <span class="st">"Olivia"</span>, <span class="st">"Noah"</span>, <span class="st">"Ava"</span>,</span></span>
<span class="r-in"><span>           <span class="st">"Ethan"</span>, <span class="st">"Sophia"</span>, <span class="st">"Mason"</span>, <span class="st">"Isabella"</span>, <span class="st">"James"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  surname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Smith"</span>, <span class="st">"Johnson"</span>, <span class="st">"Williams"</span>, <span class="st">"Brown"</span>, <span class="st">"Jones"</span>,</span></span>
<span class="r-in"><span>              <span class="st">"Garcia"</span>, <span class="st">"Miller"</span>, <span class="st">"Davis"</span>, <span class="st">"Rodriguez"</span>, <span class="st">"Wilson"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  city <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"New York"</span>, <span class="st">"Los Angeles"</span>, <span class="st">"Chicago"</span>, <span class="st">"Houston"</span>, <span class="st">"Phoenix"</span>,</span></span>
<span class="r-in"><span>           <span class="st">"Philadelphia"</span>, <span class="st">"San Antonio"</span>, <span class="st">"San Diego"</span>, <span class="st">"Dallas"</span>, <span class="st">"San Jose"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"Emma"</span>, <span class="st">"Liam"</span>, <span class="st">"Olivia"</span>, <span class="st">"Noah"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Ava"</span>, <span class="st">"Ehtan"</span>, <span class="st">"Sopia"</span>, <span class="st">"Mson"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Charlotte"</span>, <span class="st">"Benjamin"</span>, <span class="st">"Amelia"</span>, <span class="st">"Lucas"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  surname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>     <span class="st">"Smith"</span>, <span class="st">"Johnson"</span>, <span class="st">"Williams"</span>, <span class="st">"Brown"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Jnes"</span>, <span class="st">"Garca"</span>, <span class="st">"Miler"</span>, <span class="st">"Dvis"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Martinez"</span>, <span class="st">"Lee"</span>, <span class="st">"Hernandez"</span>, <span class="st">"Clark"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  city <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"New York"</span>, <span class="st">"Los Angeles"</span>, <span class="st">"Chicago"</span>, <span class="st">"Houston"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Phonix"</span>, <span class="st">"Philadelpia"</span>, <span class="st">"San Antnio"</span>, <span class="st">"San Dieg"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Seattle"</span>, <span class="st">"Miami"</span>, <span class="st">"Boston"</span>, <span class="st">"Denver"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">true_matches</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"a"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span>,</span></span>
<span class="r-in"><span>  <span class="st">"b"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">8</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"surname"</span>, <span class="st">"city"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">comparators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"name"</span> <span class="op">=</span> <span class="fu"><a href="jarowinkler_complement.html">jarowinkler_complement</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"surname"</span> <span class="op">=</span> <span class="fu"><a href="jarowinkler_complement.html">jarowinkler_complement</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"city"</span> <span class="op">=</span> <span class="fu"><a href="jarowinkler_complement.html">jarowinkler_complement</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">methods</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"name"</span> <span class="op">=</span> <span class="st">"continuous_parametric"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"surname"</span> <span class="op">=</span> <span class="st">"continuous_parametric"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"city"</span> <span class="op">=</span> <span class="st">"continuous_parametric"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu">mec</span><span class="op">(</span>A <span class="op">=</span> <span class="va">df_1</span>, B <span class="op">=</span> <span class="va">df_2</span>,</span></span>
<span class="r-in"><span>              variables <span class="op">=</span> <span class="va">variables</span>,</span></span>
<span class="r-in"><span>              comparators <span class="op">=</span> <span class="va">comparators</span>,</span></span>
<span class="r-in"><span>              methods <span class="op">=</span> <span class="va">methods</span>,</span></span>
<span class="r-in"><span>              true_matches <span class="op">=</span> <span class="va">true_matches</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">result</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Record linkage based on the following variables: name, surname, city.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ========================================================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The algorithm predicted 8 matches.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The first 6 predicted matches are:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        a     b ratio / 1000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    &lt;num&gt; &lt;num&gt;        &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:     6     6 1.433031e+08</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2:     8     8 3.198692e+07</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:     7     7 9.673745e+05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4:     5     5 2.813745e+04</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5:     1     1 3.375000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6:     2     2 3.375000e+00</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ========================================================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The construction of the classification set was based on estimates of its size.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimated false link rate (FLR): 0.2066 %.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimated missing match rate (MMR): 0.0000 %.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ========================================================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variables selected for the continuous parametric method: name, surname, city.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Estimated parameters for the continuous parametric method:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         variable p_0_M    alpha_M   beta_M      p_0_U  alpha_U    beta_U</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;char&gt; &lt;num&gt;      &lt;num&gt;    &lt;num&gt;      &lt;num&gt;    &lt;num&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1:    gamma_name 0.625 138.462279 2199.107 0.04166667 6.516736 11.173089</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2: gamma_surname 0.500 120.665706 1974.530 0.03333333 4.622775  7.167261</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3:    gamma_city 0.500   6.512723  135.163 0.03333333 5.233194  9.313035</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ========================================================</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Evaluation metrics (presented in percentages):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      recall   precision         fpr         fnr    accuracy specificity </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         100         100           0           0         100         100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    f1_score </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         100 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Note that precision = 1 - flr, and fnr = mmr.</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by First Last.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>


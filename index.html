<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Record Linkage Based on an Entropy-Maximizing Classifier • automatedRecLin</title>
<!-- katex math --><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script><script src="katex-auto.js"></script><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Record Linkage Based on an Entropy-Maximizing Classifier">
<meta name="description" content="The goal of automatedRecLin is to perform record linkage (also known as entity resolution) in unsupervised or supervised settings. It compares pairs of records from two datasets using selected comparison functions to estimate the probability or density ratio between matched and non-matched records. Based on these estimates, it predicts a set of matches that maximizes entropy. For details see: Lee et al. (2022) &lt;https://www150.statcan.gc.ca/n1/pub/12-001-x/2022001/article/00007-eng.htm&gt;, Vo et al. (2023) &lt;https://ideas.repec.org/a/eee/csdana/v179y2023ics0167947322002365.html&gt;, Sugiyama et al. (2008) &lt;doi:10.1007/s10463-008-0197-x&gt;.">
<meta property="og:description" content="The goal of automatedRecLin is to perform record linkage (also known as entity resolution) in unsupervised or supervised settings. It compares pairs of records from two datasets using selected comparison functions to estimate the probability or density ratio between matched and non-matched records. Based on these estimates, it predicts a set of matches that maximizes entropy. For details see: Lee et al. (2022) &lt;https://www150.statcan.gc.ca/n1/pub/12-001-x/2022001/article/00007-eng.htm&gt;, Vo et al. (2023) &lt;https://ideas.repec.org/a/eee/csdana/v179y2023ics0167947322002365.html&gt;, Sugiyama et al. (2008) &lt;doi:10.1007/s10463-008-0197-x&gt;.">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script><script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">automatedRecLin</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ncn-foreigners/automatedRecLin/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="the-automatedreclin-package">The <code>automatedRecLin</code> Package<a class="anchor" aria-label="anchor" href="#the-automatedreclin-package"></a>
</h1></div>
<!-- badges: start -->

<div class="section level2">
<h2 id="description">Description<a class="anchor" aria-label="anchor" href="#description"></a>
</h2>
<p>This R package is designed to perform record linkage (also known as entity resolution) in unsupervised or supervised settings. It compares pairs of records from two datasets using selected comparison functions to estimate the probability or density ratio between matched and non-matched records. Based on these estimates, it predicts a set of matches that maximizes entropy.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the stable version from CRAN.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"automatedRecLin"</span><span class="op">)</span></span></code></pre></div>
<p>To install the development version from GitHub you can use the <code>pak</code> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("pak") # uncomment if needed</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu"><a href="https://pak.r-lib.org/reference/pkg_install.html" class="external-link">pkg_install</a></span><span class="op">(</span><span class="st">"ncn-foreigners/automatedRecLin"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basic-usage">Basic usage<a class="anchor" aria-label="anchor" href="#basic-usage"></a>
</h2>
<p>Load the package for the examples.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ncn-foreigners/automatedRecLin" class="external-link">automatedRecLin</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="unsupervised-maximum-entropy-classifier-for-record-linkage">Unsupervised maximum entropy classifier for record linkage<a class="anchor" aria-label="anchor" href="#unsupervised-maximum-entropy-classifier-for-record-linkage"></a>
</h3>
<p>Generate two simple datasets that contain some common records, with typos in some cases.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Emma"</span>, <span class="st">"Liam"</span>, <span class="st">"Olivia"</span>, <span class="st">"Noah"</span>, <span class="st">"Ava"</span>,</span>
<span>           <span class="st">"Ethan"</span>, <span class="st">"Sophia"</span>, <span class="st">"Mason"</span>, <span class="st">"Isabella"</span>, <span class="st">"James"</span><span class="op">)</span>,</span>
<span>  surname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Smith"</span>, <span class="st">"Johnson"</span>, <span class="st">"Williams"</span>, <span class="st">"Brown"</span>, <span class="st">"Jones"</span>,</span>
<span>              <span class="st">"Garcia"</span>, <span class="st">"Miller"</span>, <span class="st">"Davis"</span>, <span class="st">"Rodriguez"</span>, <span class="st">"Wilson"</span><span class="op">)</span>,</span>
<span>  city <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"New York"</span>, <span class="st">"Los Angeles"</span>, <span class="st">"Chicago"</span>, <span class="st">"Houston"</span>, <span class="st">"Phoenix"</span>,</span>
<span>           <span class="st">"Philadelphia"</span>, <span class="st">"San Antonio"</span>, <span class="st">"San Diego"</span>, <span class="st">"Dallas"</span>, <span class="st">"San Jose"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Emma"</span>, <span class="st">"Liam"</span>, <span class="st">"Olivia"</span>, <span class="st">"Noah"</span>,</span>
<span>    <span class="st">"Ava"</span>, <span class="st">"Ehtan"</span>, <span class="st">"Sopia"</span>, <span class="st">"Mson"</span>,</span>
<span>    <span class="st">"Charlotte"</span>, <span class="st">"Benjamin"</span>, <span class="st">"Amelia"</span>, <span class="st">"Lucas"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  surname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"Smith"</span>, <span class="st">"Johnson"</span>, <span class="st">"Williams"</span>, <span class="st">"Brown"</span>,</span>
<span>    <span class="st">"Jnes"</span>, <span class="st">"Garca"</span>, <span class="st">"Miler"</span>, <span class="st">"Dvis"</span>,</span>
<span>    <span class="st">"Martinez"</span>, <span class="st">"Lee"</span>, <span class="st">"Hernandez"</span>, <span class="st">"Clark"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  city <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"New York"</span>, <span class="st">"Los Angeles"</span>, <span class="st">"Chicago"</span>, <span class="st">"Houston"</span>,</span>
<span>    <span class="st">"Phonix"</span>, <span class="st">"Philadelpia"</span>, <span class="st">"San Antnio"</span>, <span class="st">"San Dieg"</span>,</span>
<span>    <span class="st">"Seattle"</span>, <span class="st">"Miami"</span>, <span class="st">"Boston"</span>, <span class="st">"Denver"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df_1</span></span>
<span><span class="co">#&gt;        name   surname         city</span></span>
<span><span class="co">#&gt; 1      Emma     Smith     New York</span></span>
<span><span class="co">#&gt; 2      Liam   Johnson  Los Angeles</span></span>
<span><span class="co">#&gt; 3    Olivia  Williams      Chicago</span></span>
<span><span class="co">#&gt; 4      Noah     Brown      Houston</span></span>
<span><span class="co">#&gt; 5       Ava     Jones      Phoenix</span></span>
<span><span class="co">#&gt; 6     Ethan    Garcia Philadelphia</span></span>
<span><span class="co">#&gt; 7    Sophia    Miller  San Antonio</span></span>
<span><span class="co">#&gt; 8     Mason     Davis    San Diego</span></span>
<span><span class="co">#&gt; 9  Isabella Rodriguez       Dallas</span></span>
<span><span class="co">#&gt; 10    James    Wilson     San Jose</span></span>
<span><span class="va">df_2</span></span>
<span><span class="co">#&gt;         name   surname        city</span></span>
<span><span class="co">#&gt; 1       Emma     Smith    New York</span></span>
<span><span class="co">#&gt; 2       Liam   Johnson Los Angeles</span></span>
<span><span class="co">#&gt; 3     Olivia  Williams     Chicago</span></span>
<span><span class="co">#&gt; 4       Noah     Brown     Houston</span></span>
<span><span class="co">#&gt; 5        Ava      Jnes      Phonix</span></span>
<span><span class="co">#&gt; 6      Ehtan     Garca Philadelpia</span></span>
<span><span class="co">#&gt; 7      Sopia     Miler  San Antnio</span></span>
<span><span class="co">#&gt; 8       Mson      Dvis    San Dieg</span></span>
<span><span class="co">#&gt; 9  Charlotte  Martinez     Seattle</span></span>
<span><span class="co">#&gt; 10  Benjamin       Lee       Miami</span></span>
<span><span class="co">#&gt; 11    Amelia Hernandez      Boston</span></span>
<span><span class="co">#&gt; 12     Lucas     Clark      Denver</span></span></code></pre></div>
<p>Specify the key variables used for record linkage. Select a comparison function (i.e., a function to compare pairs of records) for each variable. For example, use the <code>jarowinkler_complement</code> function from the <code>automatedRecLin</code> package (1 - Jaro-Winkler distance). Choose a method for estimating the probability or density ratio for each variable. The available methods are: <code>"binary"</code>, <code>"continuous_parametric"</code>, <code>"continuous_nonparametric"</code>, and <code>"hit_miss"</code> (only for unsupervised learning).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">variables</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"surname"</span>, <span class="st">"city"</span><span class="op">)</span></span>
<span><span class="va">comparators</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"name"</span> <span class="op">=</span> <span class="fu"><a href="reference/jarowinkler_complement.html">jarowinkler_complement</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="st">"surname"</span> <span class="op">=</span> <span class="fu"><a href="reference/jarowinkler_complement.html">jarowinkler_complement</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="st">"city"</span> <span class="op">=</span> <span class="fu"><a href="reference/jarowinkler_complement.html">jarowinkler_complement</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">methods</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="st">"name"</span> <span class="op">=</span> <span class="st">"continuous_parametric"</span>,</span>
<span>  <span class="st">"surname"</span> <span class="op">=</span> <span class="st">"continuous_parametric"</span>,</span>
<span>  <span class="st">"city"</span> <span class="op">=</span> <span class="st">"continuous_parametric"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Perform record linkage using the <code>mec</code> function. The output contains the following information:</p>
<ul>
<li>the names of key variables,</li>
<li>the number of predicted matches,</li>
<li>the first 6 predicted matches (with their estimated probability or density ratio),</li>
<li>the method for constructing the predicted set of matches (default: <code>"size"</code>),</li>
<li>estimated false link rate (FLR),</li>
<li>estimated missing match rate (MMR),</li>
<li>estimated parameters for the variables using the <code>"binary"</code>, <code>"continuous_parametric"</code> or <code>"hit_miss"</code> methods.</li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="va">unsup_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mec.html">mec</a></span><span class="op">(</span>A <span class="op">=</span> <span class="va">df_1</span>, B <span class="op">=</span> <span class="va">df_2</span>,</span>
<span>                    variables <span class="op">=</span> <span class="va">variables</span>,</span>
<span>                    comparators <span class="op">=</span> <span class="va">comparators</span>,</span>
<span>                    methods <span class="op">=</span> <span class="va">methods</span><span class="op">)</span></span>
<span><span class="va">unsup_result</span></span>
<span><span class="co">#&gt; Record linkage based on the following variables: name, surname, city.</span></span>
<span><span class="co">#&gt; ========================================================</span></span>
<span><span class="co">#&gt; The algorithm predicted 8 matches.</span></span>
<span><span class="co">#&gt; The first 6 predicted matches are:</span></span>
<span><span class="co">#&gt;        a     b ratio / 1000</span></span>
<span><span class="co">#&gt;    &lt;num&gt; &lt;num&gt;        &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:     6     6 1.433031e+08</span></span>
<span><span class="co">#&gt; 2:     8     8 3.198692e+07</span></span>
<span><span class="co">#&gt; 3:     7     7 9.673745e+05</span></span>
<span><span class="co">#&gt; 4:     5     5 2.813745e+04</span></span>
<span><span class="co">#&gt; 5:     1     1 3.375000e+00</span></span>
<span><span class="co">#&gt; 6:     2     2 3.375000e+00</span></span>
<span><span class="co">#&gt; ========================================================</span></span>
<span><span class="co">#&gt; The construction of the classification set was based on estimates of its size.</span></span>
<span><span class="co">#&gt; Estimated false link rate (FLR): 0.2066 %.</span></span>
<span><span class="co">#&gt; Estimated missing match rate (MMR): 0.0000 %.</span></span>
<span><span class="co">#&gt; ========================================================</span></span>
<span><span class="co">#&gt; Variables selected for the continuous parametric method: name, surname, city.</span></span>
<span><span class="co">#&gt; Estimated parameters for the continuous parametric method:</span></span>
<span><span class="co">#&gt;         variable p_0_M    alpha_M   beta_M      p_0_U  alpha_U    beta_U</span></span>
<span><span class="co">#&gt;           &lt;char&gt; &lt;num&gt;      &lt;num&gt;    &lt;num&gt;      &lt;num&gt;    &lt;num&gt;     &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:    gamma_name 0.625 138.462279 2199.107 0.04166667 6.516736 11.173089</span></span>
<span><span class="co">#&gt; 2: gamma_surname 0.500 120.665706 1974.530 0.03333333 4.622775  7.167261</span></span>
<span><span class="co">#&gt; 3:    gamma_city 0.500   6.512723  135.163 0.03333333 5.233194  9.313035</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="supervised-maximimum-entropy-classifier-for-record-linkage">Supervised maximimum entropy classifier for record linkage<a class="anchor" aria-label="anchor" href="#supervised-maximimum-entropy-classifier-for-record-linkage"></a>
</h3>
<p>Generate two simple training datasets that contain some common records, with typos in some cases.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_1_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"James"</span>, <span class="st">"Emma"</span>, <span class="st">"William"</span>, <span class="st">"Olivia"</span>, <span class="st">"Thomas"</span>,</span>
<span>          <span class="st">"Sophie"</span>, <span class="st">"Harry"</span>, <span class="st">"Amelia"</span>, <span class="st">"George"</span>, <span class="st">"Isabella"</span></span>
<span>          <span class="op">)</span>,</span>
<span>        surname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"Smith"</span>, <span class="st">"Johnson"</span>, <span class="st">"Brown"</span>, <span class="st">"Taylor"</span>, <span class="st">"Wilson"</span>,</span>
<span>          <span class="st">"Davis"</span>, <span class="st">"Clark"</span>, <span class="st">"Harris"</span>, <span class="st">"Lewis"</span>, <span class="st">"Walker"</span></span>
<span>          <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df_2_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>        name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"James"</span>, <span class="st">"Ema"</span>, <span class="st">"Wimliam"</span>, <span class="st">"Olivia"</span>, <span class="st">"Charlotte"</span>,</span>
<span>          <span class="st">"Henry"</span>, <span class="st">"Lucy"</span>, <span class="st">"Edward"</span>, <span class="st">"Alice"</span>, <span class="st">"Jack"</span></span>
<span>          <span class="op">)</span>,</span>
<span>        surname <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>          <span class="st">"Smith"</span>, <span class="st">"Johnson"</span>, <span class="st">"Bron"</span>, <span class="st">"Tailor"</span>, <span class="st">"Moore"</span>,</span>
<span>          <span class="st">"Evans"</span>, <span class="st">"Hall"</span>, <span class="st">"Wright"</span>, <span class="st">"Green"</span>, <span class="st">"King"</span></span>
<span>          <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df_1_train</span></span>
<span><span class="co">#&gt;        name surname</span></span>
<span><span class="co">#&gt; 1     James   Smith</span></span>
<span><span class="co">#&gt; 2      Emma Johnson</span></span>
<span><span class="co">#&gt; 3   William   Brown</span></span>
<span><span class="co">#&gt; 4    Olivia  Taylor</span></span>
<span><span class="co">#&gt; 5    Thomas  Wilson</span></span>
<span><span class="co">#&gt; 6    Sophie   Davis</span></span>
<span><span class="co">#&gt; 7     Harry   Clark</span></span>
<span><span class="co">#&gt; 8    Amelia  Harris</span></span>
<span><span class="co">#&gt; 9    George   Lewis</span></span>
<span><span class="co">#&gt; 10 Isabella  Walker</span></span>
<span><span class="va">df_2_train</span></span>
<span><span class="co">#&gt;         name surname</span></span>
<span><span class="co">#&gt; 1      James   Smith</span></span>
<span><span class="co">#&gt; 2        Ema Johnson</span></span>
<span><span class="co">#&gt; 3    Wimliam    Bron</span></span>
<span><span class="co">#&gt; 4     Olivia  Tailor</span></span>
<span><span class="co">#&gt; 5  Charlotte   Moore</span></span>
<span><span class="co">#&gt; 6      Henry   Evans</span></span>
<span><span class="co">#&gt; 7       Lucy    Hall</span></span>
<span><span class="co">#&gt; 8     Edward  Wright</span></span>
<span><span class="co">#&gt; 9      Alice   Green</span></span>
<span><span class="co">#&gt; 10      Jack    King</span></span></code></pre></div>
<p>Specify the key variables, select comparison functions and choose methods for estimating the probability or density ratio. Additionally, provide a <code>data.frame</code> or <code>data.table</code> indicating known matches.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">variables_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"name"</span>, <span class="st">"surname"</span><span class="op">)</span></span>
<span><span class="va">comparators_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"name"</span> <span class="op">=</span> <span class="fu"><a href="reference/jarowinkler_complement.html">jarowinkler_complement</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>                          <span class="st">"surname"</span> <span class="op">=</span> <span class="fu"><a href="reference/jarowinkler_complement.html">jarowinkler_complement</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">methods_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"name"</span> <span class="op">=</span> <span class="st">"continuous_nonparametric"</span>,</span>
<span>                      <span class="st">"surname"</span> <span class="op">=</span> <span class="st">"continuous_nonparametric"</span><span class="op">)</span></span>
<span><span class="va">matches_train</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="st">"a"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, <span class="st">"b"</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span></span></code></pre></div>
<p>Train a record linkage model using the <code>train_rec_lin</code> function.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/train_rec_lin.html">train_rec_lin</a></span><span class="op">(</span>A <span class="op">=</span> <span class="va">df_1_train</span>, B <span class="op">=</span> <span class="va">df_2_train</span>,</span>
<span>                       matches <span class="op">=</span> <span class="va">matches_train</span>,</span>
<span>                       variables <span class="op">=</span> <span class="va">variables_train</span>,</span>
<span>                       comparators <span class="op">=</span> <span class="va">comparators_train</span>,</span>
<span>                       methods <span class="op">=</span> <span class="va">methods_train</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in check.sigma(nsigma, sigma_quantile, sigma, dist_nu): There are duplicate values in 'sigma', only the unique values are used.</span></span>
<span><span class="co">#&gt; Warning in check.sigma(nsigma, sigma_quantile, sigma, dist_nu): There are duplicate values in 'sigma', only the unique values are used.</span></span>
<span><span class="va">model</span></span>
<span><span class="co">#&gt; Record linkage model based on the following variables: name, surname.</span></span>
<span><span class="co">#&gt; The prior probability of matching is 0.04.</span></span>
<span><span class="co">#&gt; ========================================================</span></span>
<span><span class="co">#&gt; Variables selected for the continuous nonparametric method: name, surname.</span></span>
<span><span class="co">#&gt; ========================================================</span></span>
<span><span class="co">#&gt; Probability/density ratio type: 1.</span></span></code></pre></div>
<p>Generate two new datasets for record linkage prediction.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_1_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  <span class="st">"name"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"John"</span>, <span class="st">"Emily"</span>, <span class="st">"Mark"</span>, <span class="st">"Anna"</span>, <span class="st">"David"</span><span class="op">)</span>,</span>
<span>  <span class="st">"surname"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Smith"</span>, <span class="st">"Johnson"</span>, <span class="st">"Taylor"</span>, <span class="st">"Williams"</span>, <span class="st">"Brown"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df_2_new</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  <span class="st">"name"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"John"</span>, <span class="st">"Emely"</span>, <span class="st">"Mark"</span>, <span class="st">"Michael"</span><span class="op">)</span>,</span>
<span>  <span class="st">"surname"</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Smitth"</span>, <span class="st">"Johnson"</span>, <span class="st">"Tailor"</span>, <span class="st">"Henders"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="va">df_1_new</span></span>
<span><span class="co">#&gt;    name  surname</span></span>
<span><span class="co">#&gt; 1  John    Smith</span></span>
<span><span class="co">#&gt; 2 Emily  Johnson</span></span>
<span><span class="co">#&gt; 3  Mark   Taylor</span></span>
<span><span class="co">#&gt; 4  Anna Williams</span></span>
<span><span class="co">#&gt; 5 David    Brown</span></span>
<span><span class="va">df_2_new</span></span>
<span><span class="co">#&gt;      name surname</span></span>
<span><span class="co">#&gt; 1    John  Smitth</span></span>
<span><span class="co">#&gt; 2   Emely Johnson</span></span>
<span><span class="co">#&gt; 3    Mark  Tailor</span></span>
<span><span class="co">#&gt; 4 Michael Henders</span></span></code></pre></div>
<p>Predict matches using the <code>predict</code> function. The output has a similar structure to that of the <code>mec</code> function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result_sup</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">model</span>, <span class="va">df_1_new</span>, <span class="va">df_2_new</span><span class="op">)</span></span>
<span><span class="va">result_sup</span></span>
<span><span class="co">#&gt; The algorithm predicted 3 matches.</span></span>
<span><span class="co">#&gt; The first 3 predicted matches are:</span></span>
<span><span class="co">#&gt;        a     b ratio / 1000</span></span>
<span><span class="co">#&gt;    &lt;num&gt; &lt;num&gt;        &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:     2     2   0.04572852</span></span>
<span><span class="co">#&gt; 2:     3     3   0.02813814</span></span>
<span><span class="co">#&gt; 3:     1     1   0.02560156</span></span>
<span><span class="co">#&gt; ========================================================</span></span>
<span><span class="co">#&gt; The construction of the classification set was based on estimates of its size.</span></span>
<span><span class="co">#&gt; Estimated false link rate (FLR): 15.3038 %.</span></span>
<span><span class="co">#&gt; Estimated missing match rate (MMR): 15.3038 %.</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="integration-with-a-custom-machine-learning-model">Integration with a custom machine learning model<a class="anchor" aria-label="anchor" href="#integration-with-a-custom-machine-learning-model"></a>
</h2>
<p>The <code>automatedRecLin</code> package supports supervised record linkage using a custom machine learning (ML) model that predicts the probability of matching based on comparison vectors (e.g., XGBoost, logistic regression). For example, install and load the <code>xgboost</code> package.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("xgboost") # uncomment if needed</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dmlc/xgboost" class="external-link">xgboost</a></span><span class="op">)</span></span></code></pre></div>
<p>Use the same data, variables, and comparators as in the previous example. First, use the <code>comparison_vectors</code> function to create comparison vectors that the model will be trained on.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vectors</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/comparison_vectors.html">comparison_vectors</a></span><span class="op">(</span>A <span class="op">=</span> <span class="va">df_1_train</span>, B <span class="op">=</span> <span class="va">df_2_train</span>,</span>
<span>                              variables <span class="op">=</span> <span class="va">variables_train</span>,</span>
<span>                              comparators <span class="op">=</span> <span class="va">comparators_train</span>,</span>
<span>                              matches <span class="op">=</span> <span class="va">matches_train</span><span class="op">)</span></span>
<span><span class="va">vectors</span></span>
<span><span class="co">#&gt; Comparison based on the following variables: name, surname.</span></span>
<span><span class="co">#&gt; ========================================================</span></span>
<span><span class="co">#&gt;        a     b gamma_name gamma_surname match</span></span>
<span><span class="co">#&gt;    &lt;int&gt; &lt;int&gt;      &lt;num&gt;         &lt;num&gt; &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:     1     1  0.0000000     0.0000000     1</span></span>
<span><span class="co">#&gt; 2:     1     2  0.4777778     0.5523810     0</span></span>
<span><span class="co">#&gt; 3:     1     3  0.5523810     1.0000000     0</span></span>
<span><span class="co">#&gt; 4:     1     4  1.0000000     0.5444444     0</span></span>
<span><span class="co">#&gt; 5:     1     5  0.5629630     1.0000000     0</span></span>
<span><span class="co">#&gt; 6:     1     6  1.0000000     1.0000000     0</span></span></code></pre></div>
<p>Construct the <code>xgb.DMatrix</code> object, specify the model parameters, and train the XGBoost model.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">train_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/xgboost/man/xgb.DMatrix.html" class="external-link">xgb.DMatrix</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">vectors</span><span class="op">$</span><span class="va">Omega</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gamma_name"</span>, <span class="st">"gamma_surname"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span>,</span>
<span>  label <span class="op">=</span> <span class="va">vectors</span><span class="op">$</span><span class="va">Omega</span><span class="op">$</span><span class="va">match</span></span>
<span><span class="op">)</span></span>
<span><span class="va">params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>objective <span class="op">=</span> <span class="st">"binary:logistic"</span>,</span>
<span>               eval_metric <span class="op">=</span> <span class="st">"logloss"</span><span class="op">)</span></span>
<span><span class="va">model_xgb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/xgboost/man/xgb.train.html" class="external-link">xgboost</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">train_data</span>, params <span class="op">=</span> <span class="va">params</span>,</span>
<span>                     nrounds <span class="op">=</span> <span class="fl">100</span>, verbose <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div>
<p>Create the XGBoost-based record linkage model.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">custom_xgb_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/custom_rec_lin_model.html">custom_rec_lin_model</a></span><span class="op">(</span><span class="va">model_xgb</span>, <span class="va">vectors</span><span class="op">)</span></span>
<span><span class="va">custom_xgb_model</span></span>
<span><span class="co">#&gt; Record linkage model based on the following variables: name, surname.</span></span>
<span><span class="co">#&gt; A custom ML model was used.</span></span>
<span><span class="co">#&gt; The prior probability of matching is 0.04.</span></span>
<span><span class="co">#&gt; ========================================================</span></span>
<span><span class="co">#&gt; Probability/density ratio type: 2.</span></span></code></pre></div>
<p>Use the model for predictions. Note that the <code>xgboost</code> package requires a matrix as input for the <code>predict</code> function and that needs to be specified in the <code>data_type</code> argument. Set <code>type = "prob"</code> to ensure the XGBoost model predicts the probability of matching (this argument may vary depending on the model or library used).</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">result_xgb</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">custom_xgb_model</span>, <span class="va">df_1_new</span>, <span class="va">df_2_new</span>,</span>
<span>                      data_type <span class="op">=</span> <span class="st">"matrix"</span>, type <span class="op">=</span> <span class="st">"prob"</span><span class="op">)</span></span>
<span><span class="va">result_xgb</span></span>
<span><span class="co">#&gt; The algorithm predicted 3 matches.</span></span>
<span><span class="co">#&gt; The first 3 predicted matches are:</span></span>
<span><span class="co">#&gt;        a     b ratio / 1000</span></span>
<span><span class="co">#&gt;    &lt;num&gt; &lt;num&gt;        &lt;num&gt;</span></span>
<span><span class="co">#&gt; 1:     1     1   0.03702279</span></span>
<span><span class="co">#&gt; 2:     2     2   0.03702279</span></span>
<span><span class="co">#&gt; 3:     3     3   0.03702279</span></span>
<span><span class="co">#&gt; ========================================================</span></span>
<span><span class="co">#&gt; The construction of the classification set was based on estimates of its size.</span></span>
<span><span class="co">#&gt; Estimated false link rate (FLR): 13.2742 %.</span></span>
<span><span class="co">#&gt; Estimated missing match rate (MMR): 13.2742 %.</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="funding">Funding<a class="anchor" aria-label="anchor" href="#funding"></a>
</h2>
<p>Work on this package is supported by the National Science Centre, OPUS 20 grant no. 2020/39/B/HS4/00941 (Towards census-like statistics for foreign-born populations – quality, data integration and estimation).</p>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<p>Lee, D., Zhang, L.-C. and Kim, J. K. (2022). <a href="https://www150.statcan.gc.ca/n1/pub/12-001-x/2022001/article/00007-eng.htm" class="external-link">Maximum entropy classification for record linkage.</a> Survey Methodology, Statistics Canada, Catalogue No. 12-001-X, Vol. 48, No. 1.</p>
<p>Vo, T. H., Chauvet, G., Happe, A., Oger, E., Paquelet, S., and Garès, V. (2023). <a href="https://ideas.repec.org/a/eee/csdana/v179y2023ics0167947322002365.html" class="external-link">Extending the Fellegi-Sunter record linkage model for mixed-type data with application to the French national health data system.</a> Computational Statistics &amp; Data Analysis, 179, 107656.</p>
<p>Sugiyama, M., Suzuki, T., Nakajima, S. et al. <a href="https://doi.org/10.1007/s10463-008-0197-x" class="external-link">Direct importance estimation for covariate shift adaptation.</a> Ann Inst Stat Math 60, 699–746 (2008).</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ncn-foreigners/automatedRecLin/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/ncn-foreigners/automatedRecLin/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3" class="external-link">GPL-3</a></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing automatedRecLin</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Maciej Beręsewicz <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-8281-4301" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a>  </li>
<li>Adam Struzik <br><small class="roles"> Author, contractor </small>   </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/ncn-foreigners/automatedRecLin/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/ncn-foreigners/automatedRecLin/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://github.com/ncn-foreigners/automatedRecLin/actions/workflows/test-coverage.yaml" class="external-link"><img src="https://github.com/ncn-foreigners/automatedRecLin/actions/workflows/test-coverage.yaml/badge.svg" alt="test-coverage"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Maciej Beręsewicz, Adam Struzik.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
